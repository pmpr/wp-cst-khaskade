<?php
/*   _______________________________________
    |  Obfuscated by PMPR - Php Obfuscator  |
    |             69a0b91ce2cd2             |
    |_______________________________________|
*/
 namespace Pmpr\Custom\Khaskade\OrderCampaign\Model; use Pmpr\Common\Foundation\Interfaces\Constants; use Pmpr\Common\Foundation\Interfaces\IconInterface; use Pmpr\Common\Foundation\ORM\Model; use Pmpr\Common\Foundation\ORM\View\View; use Pmpr\Custom\Khaskade\OrderCampaign\Ajax; use Pmpr\Custom\Khaskade\OrderCampaign\Process; class Campaign extends Model { const awqiseegccssqwws = 'order_status'; const kimoacscscgimeeu = 'recipient_id'; const gqqoscwausccwwge = 'start_date'; const mocayuwikwumcmym = 'end_date'; public function register() { $this->muuwuqssqkaieqge(__('Order Campaign SMSs', PR__CST__KHASKADE))->guiaswksukmgageq(__('Order Campaign SMS', PR__CST__KHASKADE))->saemoowcasogykak(IconInterface::seymkkqukscseygy)->uaywwyimkgwyqwya([Constants::yiuwgggacagyeqmo => 10]); $this->ecmiqywsauuoccwo(Constants::ukwaycqmyyuekwqg)->ecmiqywsauuoccwo(Constants::weiosaewqequuyuq); $this->swsaakqseuaacagq(Constants::xgimwmogukqqcuky, [$this, 'ywgqgaomoekeewyg'])->swsaakqseuaacagq(Constants::mekoamssmeieqsuk, [$this, 'iomcmaskksoyqwws'])->swsaakqseuaacagq(Constants::foqikyqyomykkqaq, [$this, 'wesecyecmgmcuqai'])->swsaakqseuaacagq(Constants::emsskyeoaqokwsoa, [$this, 'yeuyyckseoiokmmm']); } public function uwmqacgewuauagai() { $eqwoegegiamegqsm = $this->caokeucsksukesyo()->skckwsgymkimyuwo(); $qquguecmwwmwomew = $this->caokeucsksukesyo()->eiwcuqigayigimak()->uyomwmskouyyqyyq(); $this->cquokmemekqqywgi($eqwoegegiamegqsm->gysoeyaguiyewoes(Constants::qescuiwgsyuikume)->gswweykyogmsyawy(__('Title', PR__CST__KHASKADE)))->cquokmemekqqywgi($eqwoegegiamegqsm->gysoeyaguiyewoes(Constants::eoskkkieowogacws)->gswweykyogmsyawy(__('Message Text', PR__CST__KHASKADE))->acceqyqygswoecwe(900)->acokiqqgsmoqaeyu())->cquokmemekqqywgi($eqwoegegiamegqsm->qsqocqioeeqooquq('orders_filter')->gswweykyogmsyawy(__('Orders Filter', PR__CST__KHASKADE))->iwwmociiuayuwssq(function ($eqgoocgaqwqcimie, $mksyucucyswaukig) { $iymqeycmaikgmoau = $this->waecsyqmwascmqoa($mksyucucyswaukig, self::awqiseegccssqwws); $yooaaeuioeawcqms = $this->waecsyqmwascmqoa($mksyucucyswaukig, self::gqqoscwausccwwge); $seusouwwgeqagsce = $this->waecsyqmwascmqoa($mksyucucyswaukig, self::mocayuwikwumcmym); $qquguecmwwmwomew = $this->caokeucsksukesyo()->eiwcuqigayigimak()->uyomwmskouyyqyyq(); $icwkuwimswoisqss = $this->caokeucsksukesyo()->gagsyqagguwwauac(); $swqimwqeweekeusq = $this->caokeucsksukesyo()->wgqqgewcmcemoewo(); $ksaameoqigiaoigg = $swqimwqeweekeusq->iaaacsuskiakkwui(sprintf(__('Orders with "%1$s" between "%2$s" and "%3$s".', PR__CST__KHASKADE), $swqimwqeweekeusq->ciuuiyckmsygceis($this->uwkmaywceaaaigwo()->mmmcswscsiecscwg()->isamiwuouuqooysq($iymqeycmaikgmoau)), $swqimwqeweekeusq->ciuuiyckmsygceis($icwkuwimswoisqss->ekasyoagocygouom($yooaaeuioeawcqms, $qquguecmwwmwomew)), $swqimwqeweekeusq->ciuuiyckmsygceis($icwkuwimswoisqss->ekasyoagocygouom($seusouwwgeqagsce, $qquguecmwwmwomew)))); if ($this->waecsyqmwascmqoa($mksyucucyswaukig, Constants::ciywsqoeiymemsys) !== Constants::qgmyyeewkieecqck) { $awqkwecemeikcgea = Recipient::symcgieuakksimmu()->iekyeyicoyyawomk()->ieieyoeqmmeysauc(Recipient::iuyuwaomgikisgww, $this->mwyqswsaeeewsosm($mksyucucyswaukig)); if ($awqkwecemeikcgea > 0) { $ksaameoqigiaoigg .= $swqimwqeweekeusq->iaaacsuskiakkwui(sprintf(__('Including "%s" recipients for sending.', PR__CST__KHASKADE), $swqimwqeweekeusq->ciuuiyckmsygceis($icwkuwimswoisqss->eusockqasqqmoess($awqkwecemeikcgea)))); } } return $ksaameoqigiaoigg; }))->cquokmemekqqywgi($eqwoegegiamegqsm->yyuiuwgokmwioomq(Constants::ciywsqoeiymemsys)->gswweykyogmsyawy(__('Process Status', PR__CST__KHASKADE))->eyygsasuqmommkua(Constants::qgmyyeewkieecqck)->kesomeowemmyygey(1, Constants::qgmyyeewkieecqck, __('Processing', PR__CST__KHASKADE))->kesomeowemmyygey(2, Constants::oomiykwyawmigaui, __('Awaiting to Approve', PR__CST__KHASKADE))->kesomeowemmyygey(3, Constants::uamiymcuyqmggecc, __('Sending', PR__CST__KHASKADE))->kesomeowemmyygey(4, Constants::amcogigwsaqssuai, __('Completed', PR__CST__KHASKADE))->kesomeowemmyygey(5, Constants::uasuowkaguiwoouw, __('Failed', PR__CST__KHASKADE)))->cquokmemekqqywgi($eqwoegegiamegqsm->qwwuoqeeiyuoyogs(self::gqqoscwausccwwge)->migyiqecesmwseuy($qquguecmwwmwomew)->gswweykyogmsyawy(__('Orders Start Date', PR__CST__KHASKADE))->acokiqqgsmoqaeyu())->cquokmemekqqywgi($eqwoegegiamegqsm->qwwuoqeeiyuoyogs(self::mocayuwikwumcmym)->migyiqecesmwseuy($qquguecmwwmwomew)->gswweykyogmsyawy(__('Orders End Date', PR__CST__KHASKADE))->acokiqqgsmoqaeyu())->cquokmemekqqywgi($eqwoegegiamegqsm->usqseiuaeauwuwus(self::awqiseegccssqwws)->acceqyqygswoecwe(60)->gswweykyogmsyawy(__('Order Status', PR__CST__KHASKADE))->acokiqqgsmoqaeyu()->iwwmociiuayuwssq(function ($eqgoocgaqwqcimie) { return $this->uwkmaywceaaaigwo()->mmmcswscsiecscwg()->isamiwuouuqooysq($eqgoocgaqwqcimie); }))->cquokmemekqqywgi($eqwoegegiamegqsm->eoaomaokwkwqyqiq(self::kimoacscscgimeeu)->gswweykyogmsyawy(__('Users', PR__CST__KHASKADE))->ckgquisaimmgwuyu(Recipient::class))->cquokmemekqqywgi($eqwoegegiamegqsm->qwwuoqeeiyuoyogs(Constants::CREATED_AT)->gswweykyogmsyawy(__('Created At', PR__CST__KHASKADE))->qcqeqimisiisswky()); parent::uwmqacgewuauagai(); } public function aoqwywcqmoqaukkq() { $uuyucgkyusckoaeq = $this->caokeucsksukesyo()->wmkogisswkckmeua(); $uqiykqoyaqymcues = $this->qcaekwgmiswccowk(Constants::awysmmukegasimmq); $woiyyysiweciuqwq = true; if ($uqiykqoyaqymcues) { $moqewomugocaueis = $this->qyeguewwsmosqcwc(); if ($moqewomugocaueis) { $mksyucucyswaukig = $this->imgymusqgccqsqqq($moqewomugocaueis); $iueymcwwscwqkiyq = $this->ogegcqqcukiaqscy(Constants::ciywsqoeiymemsys, $mksyucucyswaukig); $woiyyysiweciuqwq = in_array($iueymcwwscwqkiyq, [Constants::qgmyyeewkieecqck, Constants::sgoswgskyiiwkyuo]); } } $this->yyoqecggyacaseko()->mkksewyosgeumwsa($uuyucgkyusckoaeq->ymuegqgyuagyucws(Constants::qescuiwgsyuikume)->eumecwmqmukqgyea())->mkksewyosgeumwsa($uuyucgkyusckoaeq->ymuegqgyuagyucws(self::gqqoscwausccwwge)->oykaosmaegqwmoga($uqiykqoyaqymcues, true)->iccqusgqmsqaiqow(self::mocayuwikwumcmym, 'from')->eumecwmqmukqgyea())->mkksewyosgeumwsa($uuyucgkyusckoaeq->ymuegqgyuagyucws(self::mocayuwikwumcmym)->oykaosmaegqwmoga($uqiykqoyaqymcues, true)->iccqusgqmsqaiqow(self::gqqoscwausccwwge, 'to')->eumecwmqmukqgyea())->mkksewyosgeumwsa($uuyucgkyusckoaeq->yyuwuqsiucweeoue(self::awqiseegccssqwws)->acauweqyyugwisqc($this->uwkmaywceaaaigwo()->mmmcswscsiecscwg()->agausceiyceikeag())->eumecwmqmukqgyea()->oykaosmaegqwmoga($uqiykqoyaqymcues, true))->mkksewyosgeumwsa($uuyucgkyusckoaeq->uouyygwcgsmygaee(Constants::eoskkkieowogacws)->oykaosmaegqwmoga(!$woiyyysiweciuqwq, true)->mkmssscwmeekwgqo()->eumecwmqmukqgyea()->woiuekkeucikkyum(sprintf(__('Please provide a non-empty text and make sure it does not exceed %s characters', PR__CST__KHASKADE), $this->caokeucsksukesyo()->gagsyqagguwwauac()->eusockqasqqmoess(900)))); parent::aoqwywcqmoqaukkq(); } public function ywgqgaomoekeewyg($qqomumygoacsmsie, View $mksyucucyswaukig) { if ($this->qcaekwgmiswccowk(Constants::weiosaewqequuyuq)) { $mksyucucyswaukig->rsaiaimkmskoiysk(Constants::mqkiiimeocmcyecq, 'approve_campaign', function ($aokagokqyuysuksm, $mksyucucyswaukig) use($qqomumygoacsmsie) { if (Constants::oomiykwyawmigaui === $this->ogegcqqcukiaqscy(Constants::ciywsqoeiymemsys, $mksyucucyswaukig)) { $awqkwecemeikcgea = Recipient::symcgieuakksimmu()->iekyeyicoyyawomk()->ieieyoeqmmeysauc(Recipient::iuyuwaomgikisgww, $aokagokqyuysuksm); if ($awqkwecemeikcgea > 0) { $uuyucgkyusckoaeq = $this->caokeucsksukesyo()->wmkogisswkckmeua(); $swqimwqeweekeusq = $this->caokeucsksukesyo()->wgqqgewcmcemoewo(); $qquguecmwwmwomew = $this->caokeucsksukesyo()->eiwcuqigayigimak()->uyomwmskouyyqyyq(); $icwkuwimswoisqss = $this->caokeucsksukesyo()->gagsyqagguwwauac(); $ewgwqamkygiqaawc = $uuyucgkyusckoaeq->oockkqiqsssakuug(__('This action is irreversible. Once confirmed, SMS messages will be sent through your SMS panel and cannot be canceled or modified.', PR__CST__KHASKADE)); $ewgwqamkygiqaawc .= $swqimwqeweekeusq->iaaacsuskiakkwui([sprintf(__('The following message will be sent to %1$s users who placed orders with the status %2$s from %3$s to %4$s', PR__CST__KHASKADE), $swqimwqeweekeusq->ciuuiyckmsygceis($icwkuwimswoisqss->eusockqasqqmoess($awqkwecemeikcgea)), $swqimwqeweekeusq->ciuuiyckmsygceis($this->uwkmaywceaaaigwo()->mmmcswscsiecscwg()->isamiwuouuqooysq($this->waecsyqmwascmqoa($mksyucucyswaukig, self::awqiseegccssqwws))), $swqimwqeweekeusq->ciuuiyckmsygceis($icwkuwimswoisqss->ekasyoagocygouom($this->waecsyqmwascmqoa($mksyucucyswaukig, self::gqqoscwausccwwge), $qquguecmwwmwomew)), $swqimwqeweekeusq->ciuuiyckmsygceis($icwkuwimswoisqss->ekasyoagocygouom($this->waecsyqmwascmqoa($mksyucucyswaukig, self::mocayuwikwumcmym), $qquguecmwwmwomew)))], ['class' => 'text-center']); $ewgwqamkygiqaawc .= $swqimwqeweekeusq->iaaacsuskiakkwui($this->waecsyqmwascmqoa($mksyucucyswaukig, Constants::eoskkkieowogacws), ['class' => 'text-center my-3']); $ewgwqamkygiqaawc .= $swqimwqeweekeusq->iaaacsuskiakkwui(__('Are you sure you want to proceed?', PR__CST__KHASKADE), ['class' => 'text-center']); return $uuyucgkyusckoaeq->icqkogwskuwscskk([Constants::squoamkioomemiyi => Constants::PRIMARY, Constants::qescuiwgsyuikume => __('SMS Sending Confirmation (Approve Campaign)', PR__CST__KHASKADE), Constants::PREFIX => "approve_campaign{$aokagokqyuysuksm}", Constants::ssmskyqgcmeiayco => $ewgwqamkygiqaawc, Constants::kekekeusyqkouowm => [Constants::mosycwwoqguicaeo, Constants::eucymkqyykekuymy => $uuyucgkyusckoaeq->sggkmaawiqsqikgu(Ajax::syiwkeuosokymcyi, __('Approve Campaign', PR__CST__KHASKADE), ['campaign_id' => $aokagokqyuysuksm, Constants::xwwaeweqegiqeqkm => $this->uwkmaywceaaaigwo()->giiecckwoyiawoyy()->ikkqcccaweckukug(Ajax::kaycuaqmcqiumuew)], ['class' => 'pr-btn btn-primary'])]], [Constants::ELEMENT => 'a', Constants::qescuiwgsyuikume => __('Approve Campaign', PR__CST__KHASKADE)]); } } return ''; }); } } public function yeuyyckseoiokmmm($icwicymcioeyeyek, $aokagokqyuysuksm = 0) { if (!empty($aokagokqyuysuksm)) { unset($icwicymcioeyeyek[self::awqiseegccssqwws]); unset($icwicymcioeyeyek[self::gqqoscwausccwwge]); unset($icwicymcioeyeyek[self::mocayuwikwumcmym]); } return $icwicymcioeyeyek; } public function wesecyecmgmcuqai($icwicymcioeyeyek, $oikmcqwkmsyiicqs) { $icwkuwimswoisqss = $this->caokeucsksukesyo()->gagsyqagguwwauac(); $uamcoiueqaamsqma = $icwicymcioeyeyek[Constants::eoskkkieowogacws] ?? ''; if (empty($uamcoiueqaamsqma) || !is_string($uamcoiueqaamsqma) || strlen($uamcoiueqaamsqma) > 900) { $oikmcqwkmsyiicqs->msqsseeaasqysese($this->caokeucsksukesyo()->euekiyuksecoccus()->gosmqcmmomkqwmis(sprintf(__('The entered message is invalid. Please provide a non-empty text and make sure it does not exceed %s characters.', PR__CST__KHASKADE), $icwkuwimswoisqss->eusockqasqqmoess(900)))); } else { $iymqeycmaikgmoau = $icwicymcioeyeyek[self::awqiseegccssqwws] ?? ''; if (empty($iymqeycmaikgmoau)) { $oikmcqwkmsyiicqs->msqsseeaasqysese($this->caokeucsksukesyo()->euekiyuksecoccus()->cackyykusuowuiwg(__('Order Status', PR__CST__KHASKADE))); } else { $yooaaeuioeawcqms = $icwicymcioeyeyek[self::gqqoscwausccwwge] ?? ''; if (empty($yooaaeuioeawcqms)) { $oikmcqwkmsyiicqs->msqsseeaasqysese($this->caokeucsksukesyo()->euekiyuksecoccus()->cackyykusuowuiwg(__('Order Start Date', PR__CST__KHASKADE))); } else { $seusouwwgeqagsce = $icwicymcioeyeyek[self::mocayuwikwumcmym] ?? ''; if (empty($seusouwwgeqagsce)) { $oikmcqwkmsyiicqs->msqsseeaasqysese($this->caokeucsksukesyo()->euekiyuksecoccus()->cackyykusuowuiwg(__('Order End Date', PR__CST__KHASKADE))); } else { $yooaaeuioeawcqms = date('Y-m-d 00:00:00', strtotime($yooaaeuioeawcqms)); $seusouwwgeqagsce = date('Y-m-d 23:59:59', strtotime($seusouwwgeqagsce)); $kswooiskywsugoyw = $this->uwkmaywceaaaigwo()->mmmcswscsiecscwg()->ciugwooasaqcywas([Constants::cgiswgcumueqgcmw => -1, Constants::ssewswaiouwqieog => Constants::oyaoekcogwkcekcc, Constants::ciywsqoeiymemsys => $iymqeycmaikgmoau, Constants::emakkoeakyciuask => $yooaaeuioeawcqms . '...' . $seusouwwgeqagsce]); if (count($kswooiskywsugoyw) <= 0) { $qquguecmwwmwomew = $this->caokeucsksukesyo()->eiwcuqigayigimak()->uyomwmskouyyqyyq(); $swqimwqeweekeusq = $this->caokeucsksukesyo()->wgqqgewcmcemoewo(); $oikmcqwkmsyiicqs->msqsseeaasqysese(sprintf(__('No orders with status "%1$s" were found within the specified date range (%2$s to %3$s).', PR__CST__KHASKADE), $swqimwqeweekeusq->ciuuiyckmsygceis($this->uwkmaywceaaaigwo()->mmmcswscsiecscwg()->isamiwuouuqooysq($iymqeycmaikgmoau)), $swqimwqeweekeusq->ciuuiyckmsygceis($icwkuwimswoisqss->ekasyoagocygouom($yooaaeuioeawcqms, $qquguecmwwmwomew)), $swqimwqeweekeusq->ciuuiyckmsygceis($icwkuwimswoisqss->ekasyoagocygouom($seusouwwgeqagsce, $qquguecmwwmwomew)))); } } } } } } public function iomcmaskksoyqwws($moqewomugocaueis, $icwicymcioeyeyek, $siquossayskcwkea) { Process::symcgieuakksimmu()->iaikqquqgiouoaks($moqewomugocaueis, 1); } }
